SQL> 
SQL> --student id: 33413126
SQL> --student name: Cheuk Hin Chester Man
SQL> 
SQL> DROP TABLE ADDRESS CASCADE CONSTRAINTS 
  2  ;

Table ADDRESS dropped.

SQL> 
SQL> DROP TABLE CABIN CASCADE CONSTRAINTS 
  2  ;

Table CABIN dropped.

SQL> 
SQL> DROP TABLE COUNTRY CASCADE CONSTRAINTS 
  2  ;

Table COUNTRY dropped.

SQL> 
SQL> DROP TABLE CRUISE CASCADE CONSTRAINTS 
  2  ;

Table CRUISE dropped.

SQL> 
SQL> DROP TABLE MANIFEST CASCADE CONSTRAINTS 
  2  ;

Table MANIFEST dropped.

SQL> 
SQL> DROP TABLE OPERATOR CASCADE CONSTRAINTS 
  2  ;

Table OPERATOR dropped.

SQL> 
SQL> DROP TABLE PASSENGER CASCADE CONSTRAINTS 
  2  ;

Table PASSENGER dropped.

SQL> 
SQL> DROP TABLE PORT CASCADE CONSTRAINTS 
  2  ;

Table PORT dropped.

SQL> 
SQL> DROP TABLE SHIP CASCADE CONSTRAINTS 
  2  ;

Table SHIP dropped.

SQL> 
SQL> -- predefined type, no DDL - MDSYS.SDO_GEOMETRY
SQL> 
SQL> -- predefined type, no DDL - XMLTYPE
SQL> 
SQL> CREATE TABLE ADDRESS 
  2      ( 
  3       address_id       VARCHAR2 (7)  NOT NULL , 
  4       address_street   VARCHAR2 (50)  NOT NULL , 
  5       address_town     VARCHAR2 (50)  NOT NULL , 
  6       address_postcode VARCHAR2 (10)  NOT NULL , 
  7       address_country  VARCHAR2 (50)  NOT NULL 
  8      ) 
  9  ;

Table ADDRESS created.

SQL> 
SQL> COMMENT ON COLUMN ADDRESS.address_id IS 'address id (surrogate PK)' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN ADDRESS.address_street IS 'address street' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN ADDRESS.address_town IS 'address town' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN ADDRESS.address_postcode IS 'address postcode' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN ADDRESS.address_country IS 'address_country' 
  2  ;

Comment created.

SQL> 
SQL> ALTER TABLE ADDRESS 
  2      ADD CONSTRAINT ADDRESS_PK PRIMARY KEY ( address_id ) ;

Table ADDRESS altered.

SQL> 
SQL> ALTER TABLE ADDRESS 
  2      ADD CONSTRAINT ADDRESS_NK UNIQUE ( address_street , address_town , address_postcode , address_country ) ;

Table ADDRESS altered.

SQL> 
SQL> CREATE TABLE CABIN 
  2      ( 
  3       cabin_no             NUMBER (7)  NOT NULL , 
  4       ship_code            NUMBER (7)  NOT NULL , 
  5       cabin_sleep_capacity NUMBER (7)  NOT NULL , 
  6       cabin_class          VARCHAR2 (10)  NOT NULL 
  7      ) 
  8  ;

Table CABIN created.

SQL> 
SQL> ALTER TABLE CABIN 
  2      ADD CONSTRAINT chk_cabin_class 
  3      CHECK (cabin_class IN ('B', 'I', 'OV', 'S')) 
  4  ;

Table CABIN altered.

SQL> 
SQL> COMMENT ON COLUMN CABIN.cabin_no IS 'cabin number' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN CABIN.ship_code IS 'ship code' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN CABIN.cabin_sleep_capacity IS 'cabin sleep capacity' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN CABIN.cabin_class IS 'cabin class I-Interior, OV-Ocean view, B-Balcony, S-Suite' 
  2  ;

Comment created.

SQL> 
SQL> ALTER TABLE CABIN 
  2      ADD CONSTRAINT CABIN_PK PRIMARY KEY ( cabin_no, ship_code ) ;

Table CABIN altered.

SQL> 
SQL> CREATE TABLE COUNTRY 
  2      ( 
  3       country_code NUMBER (7)  NOT NULL , 
  4       country_name VARCHAR2 (30)  NOT NULL 
  5      ) 
  6  ;

Table COUNTRY created.

SQL> 
SQL> COMMENT ON COLUMN COUNTRY.country_code IS 'country code' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN COUNTRY.country_name IS 'country name' 
  2  ;

Comment created.

SQL> 
SQL> ALTER TABLE COUNTRY 
  2      ADD CONSTRAINT COUNTRY_PK PRIMARY KEY ( country_code ) ;

Table COUNTRY altered.

SQL> 
SQL> CREATE TABLE CRUISE 
  2      ( 
  3       cruise_id               NUMBER (7)  NOT NULL , 
  4       cruise_name             VARCHAR2 (20)  NOT NULL , 
  5       cruise_description      VARCHAR2 (100)  NOT NULL , 
  6       cruise_depart_date      DATE  NOT NULL , 
  7       cruise_deport_time      DATE  NOT NULL , 
  8       cruise_departurearrival VARCHAR2 (7)  NOT NULL , 
  9       cruise_datetime         DATE  NOT NULL , 
 10       cruise_cost_per_person  NUMBER (7)  NOT NULL 
 11      ) 
 12  ;

Table CRUISE created.

SQL> 
SQL> COMMENT ON COLUMN CRUISE.cruise_id IS 'cruise id' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN CRUISE.cruise_name IS 'name of the cruise' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN CRUISE.cruise_description IS 'description of the cruise' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN CRUISE.cruise_depart_date IS 'depart date of the cruise' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN CRUISE.cruise_deport_time IS 'cruise depart time' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN CRUISE.cruise_departurearrival IS 'departure/arrival of cruise' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN CRUISE.cruise_datetime IS 'cruise date/time' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN CRUISE.cruise_cost_per_person IS 'cruise cost per person' 
  2  ;

Comment created.

SQL> 
SQL> ALTER TABLE CRUISE 
  2      ADD CONSTRAINT CRUISE_PK PRIMARY KEY ( cruise_id ) ;

Table CRUISE altered.

SQL> 
SQL> CREATE TABLE MANIFEST 
  2      ( 
  3       passenger_id         VARCHAR2 (7)  NOT NULL , 
  4       passenger_board_date DATE  NOT NULL , 
  5       passenger_board_time DATE  NOT NULL 
  6      ) 
  7  ;

Table MANIFEST created.

SQL> 
SQL> COMMENT ON COLUMN MANIFEST.passenger_id IS 'passenger id' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN MANIFEST.passenger_board_date IS 'board date of the passenger ' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN MANIFEST.passenger_board_time IS 'board time of the passenger' 
  2  ;

Comment created.

SQL> 
SQL> ALTER TABLE MANIFEST 
  2      ADD CONSTRAINT MANIFEST_PK PRIMARY KEY ( passenger_id ) ;

Table MANIFEST altered.

SQL> 
SQL> CREATE TABLE OPERATOR 
  2      ( 
  3       operator_id       NUMBER (7)  NOT NULL , 
  4       operator_name     NUMBER (10)  NOT NULL , 
  5       operator_ceo_name VARCHAR2 (50)  NOT NULL , 
  6       ship_code         NUMBER (7)  NOT NULL 
  7      ) 
  8  ;

Table OPERATOR created.

SQL> 
SQL> COMMENT ON COLUMN OPERATOR.operator_id IS 'operator id ' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN OPERATOR.operator_name IS 'operator name' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN OPERATOR.operator_ceo_name IS 'operator ceo name' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN OPERATOR.ship_code IS 'ship code' 
  2  ;

Comment created.

SQL> 
SQL> ALTER TABLE OPERATOR 
  2      ADD CONSTRAINT OPERATOR_PK PRIMARY KEY ( operator_id ) ;

Table OPERATOR altered.

SQL> 
SQL> CREATE TABLE PASSENGER 
  2      ( 
  3       passenger_id         VARCHAR2 (7)  NOT NULL , 
  4       ship_code            NUMBER (7)  NOT NULL , 
  5       guardian_id          VARCHAR2 (7) , 
  6       passenger_first_name VARCHAR2 (50)  NOT NULL , 
  7       passenger_last_name  VARCHAR2 (50)  NOT NULL , 
  8       passenger_gender     VARCHAR2 (10)  NOT NULL , 
  9       passenger_birth_date DATE  NOT NULL , 
 10       passenger_phone_no   NUMBER (20) , 
 11       address_id           VARCHAR2 (7)  NOT NULL 
 12      ) 
 13  ;

Table PASSENGER created.

SQL> 
SQL> COMMENT ON COLUMN PASSENGER.passenger_id IS 'passenger id' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PASSENGER.ship_code IS 'ship code' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PASSENGER.guardian_id IS 'passenger id' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PASSENGER.passenger_first_name IS 'first name of the passenger' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PASSENGER.passenger_last_name IS 'last name of the passenger' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PASSENGER.passenger_gender IS 'gender of the passenger' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PASSENGER.passenger_birth_date IS 'passenger birth date' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PASSENGER.passenger_phone_no IS 'passenger phone number' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PASSENGER.address_id IS 'address id (surrogate PK)' 
  2  ;

Comment created.

SQL> 
SQL> ALTER TABLE PASSENGER 
  2      ADD CONSTRAINT PASSENGER_PK PRIMARY KEY ( passenger_id ) ;

Table PASSENGER altered.

SQL> 
SQL> CREATE TABLE PORT 
  2      ( 
  3       port_code       NUMBER (7)  NOT NULL , 
  4       port_name       VARCHAR2 (50)  NOT NULL , 
  5       port_latitude   NUMBER (30) , 
  6       port_longtitude NUMBER (30) , 
  7       country_code    NUMBER (7) , 
  8       cruise_id       NUMBER (7) 
  9      ) 
 10  ;

Table PORT created.

SQL> 
SQL> COMMENT ON COLUMN PORT.port_code IS 'port code' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PORT.port_name IS 'port name' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PORT.port_longtitude IS 'port longtitude' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PORT.country_code IS 'country code' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN PORT.cruise_id IS 'cruise id' 
  2  ;

Comment created.

SQL> 
SQL> ALTER TABLE PORT 
  2      ADD CONSTRAINT PORT_PK PRIMARY KEY ( port_code ) ;

Table PORT altered.

SQL> 
SQL> CREATE TABLE SHIP 
  2      ( 
  3       ship_code               NUMBER (7)  NOT NULL , 
  4       operator_id             NUMBER (7)  NOT NULL , 
  5       cruise_id               NUMBER (7)  NOT NULL , 
  6       ship_name               VARCHAR2 (50)  NOT NULL , 
  7       ship_commission_date    DATE  NOT NULL , 
  8       ship_tonnage            NUMBER (7)  NOT NULL , 
  9       ship_max_guest_capacity NUMBER (7) , 
 10       ship_register_country   VARCHAR2 (50)  NOT NULL 
 11      ) 
 12  ;

Table SHIP created.

SQL> 
SQL> COMMENT ON COLUMN SHIP.ship_code IS 'ship code' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN SHIP.operator_id IS 'operator id ' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN SHIP.cruise_id IS 'cruise id' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN SHIP.ship_name IS 'ship name' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN SHIP.ship_commission_date IS 'ship commission date' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN SHIP.ship_tonnage IS 'ship toonage' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN SHIP.ship_max_guest_capacity IS 'ship maximum guest capacity' 
  2  ;

Comment created.

SQL> 
SQL> COMMENT ON COLUMN SHIP.ship_register_country IS 'ship register country' 
  2  ;

Comment created.

SQL> 
SQL> ALTER TABLE SHIP 
  2      ADD CONSTRAINT SHIP_PK PRIMARY KEY ( ship_code ) ;

Table SHIP altered.

SQL> 
SQL> ALTER TABLE PASSENGER 
  2      ADD CONSTRAINT address_passenger FOREIGN KEY 
  3      ( 
  4       address_id
  5      ) 
  6      REFERENCES ADDRESS 
  7      ( 
  8       address_id
  9      ) 
 10  ;

Table PASSENGER altered.

SQL> 
SQL> ALTER TABLE PORT 
  2      ADD CONSTRAINT country_port_fk FOREIGN KEY 
  3      ( 
  4       country_code
  5      ) 
  6      REFERENCES COUNTRY 
  7      ( 
  8       country_code
  9      ) 
 10  ;

Table PORT altered.

SQL> 
SQL> ALTER TABLE PORT 
  2      ADD CONSTRAINT cruise_port_fk FOREIGN KEY 
  3      ( 
  4       cruise_id
  5      ) 
  6      REFERENCES CRUISE 
  7      ( 
  8       cruise_id
  9      ) 
 10  ;

Table PORT altered.

SQL> 
SQL> ALTER TABLE SHIP 
  2      ADD CONSTRAINT cruise_ship_fk FOREIGN KEY 
  3      ( 
  4       cruise_id
  5      ) 
  6      REFERENCES CRUISE 
  7      ( 
  8       cruise_id
  9      ) 
 10  ;

Table SHIP altered.

SQL> 
SQL> ALTER TABLE SHIP 
  2      ADD CONSTRAINT operator_ship_fk FOREIGN KEY 
  3      ( 
  4       operator_id
  5      ) 
  6      REFERENCES OPERATOR 
  7      ( 
  8       operator_id
  9      ) 
 10  ;

Table SHIP altered.

SQL> 
SQL> ALTER TABLE PASSENGER 
  2      ADD CONSTRAINT passenger_guardian FOREIGN KEY 
  3      ( 
  4       guardian_id
  5      ) 
  6      REFERENCES PASSENGER 
  7      ( 
  8       passenger_id
  9      ) 
 10  ;

Table PASSENGER altered.

SQL> 
SQL> ALTER TABLE MANIFEST 
  2      ADD CONSTRAINT passenger_manifest_fk FOREIGN KEY 
  3      ( 
  4       passenger_id
  5      ) 
  6      REFERENCES PASSENGER 
  7      ( 
  8       passenger_id
  9      ) 
 10  ;

Table MANIFEST altered.

SQL> 
SQL> ALTER TABLE CABIN 
  2      ADD CONSTRAINT ship_cabin_fk FOREIGN KEY 
  3      ( 
  4       ship_code
  5      ) 
  6      REFERENCES SHIP 
  7      ( 
  8       ship_code
  9      ) 
 10  ;

Table CABIN altered.

SQL> 
SQL> ALTER TABLE PASSENGER 
  2      ADD CONSTRAINT ship_passenger_fk FOREIGN KEY 
  3      ( 
  4       ship_code
  5      ) 
  6      REFERENCES SHIP 
  7      ( 
  8       ship_code
  9      ) 
 10  ;

Table PASSENGER altered.

SQL> 
SQL> SPOOL off 
